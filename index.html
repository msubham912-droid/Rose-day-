<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Happy Chocolate Day Moulima ğŸ«â¤ï¸</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Poppins',sans-serif;
  -webkit-tap-highlight-color:transparent;
}

html,body{
  width:100%;
  height:100%;
  overflow:hidden;
  touch-action:none;
  background:#7b1f2a;
  color:#fff;
}

/* ---------- COMMON ---------- */
.page{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  transition:opacity .7s ease, transform .7s ease;
  z-index:2;
}

.hidden{
  opacity:0;
  pointer-events:none;
  transform:scale(1.04);
}

.card{
  background:rgba(60,10,10,.55);
  padding:26px;
  border-radius:22px;
  width:85%;
  max-width:380px;
  text-align:center;
  box-shadow:0 0 40px rgba(255,140,140,.35);
}

/* ---------- PAGE 1 ---------- */
#page1{
  background:radial-gradient(circle at top,#a83246,#6b1f2a);
}

.typewriter{
  font-size:24px;
  text-align:center;
  width:85%;
  min-height:100px;
}

/* âœ… Gradient white button */
.btn{
  margin-top:28px;
  padding:14px 36px;
  border-radius:50px;
  background:linear-gradient(180deg,#ffffff,#ececec);
  color:#7b1f2a;
  border:none;
  font-size:18px;
  font-weight:600;
  box-shadow:0 10px 28px rgba(0,0,0,.35);
  animation:pulse 1.4s infinite;
}

@keyframes pulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.08)}
  100%{transform:scale(1)}
}

/* ---------- BACKGROUND CHOCOLATE RAIN ---------- */
.bg-choco{
  position:absolute;
  top:-40px;
  font-size:24px;
  opacity:.55;
  animation:fall linear forwards;
  pointer-events:none;
  z-index:1;
}

@keyframes fall{
  to{transform:translateY(110vh)}
}

/* ---------- GAME ---------- */
#page3{
  background:radial-gradient(circle,#a83246,#6b1f2a);
}

#basket{
  position:absolute;
  bottom:20px;
  font-size:52px;
  left:50%;
  transform:translateX(-50%);
}

#counter{
  position:absolute;
  top:14px;
  font-size:18px;
  opacity:.95;
}

/* ---------- FIREWORKS ---------- */
.firework{
  position:absolute;
  width:8px;
  height:8px;
  border-radius:50%;
  animation:explode 1s ease-out forwards;
}

@keyframes explode{
  to{
    transform:translate(var(--x),var(--y));
    opacity:0;
  }
}

/* ---------- FINAL ---------- */
#page4{
  background:radial-gradient(circle,#b8324a,#7b1f2a);
  text-align:center;
}

.heart{
  font-size:90px;
  animation:beat 1s infinite;
}

@keyframes beat{
  0%{transform:scale(1)}
  50%{transform:scale(1.2)}
  100%{transform:scale(1)}
}

.envelope{
  margin-top:24px;
  font-size:52px;
  animation:pulse 1.5s infinite;
}

.letter{
  display:none;
  margin-top:18px;
  font-size:18px;
  line-height:1.6;
}
</style>
</head>

<body>

<audio id="unwrap" src="https://assets.mixkit.co/sfx/preview/mixkit-fast-paper-tear-2994.mp3"></audio>
<audio id="bite" src="https://assets.mixkit.co/sfx/preview/mixkit-crunchy-bite-183.wav"></audio>
<audio id="success" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-win-2037.wav"></audio>
<audio id="bgm" src="https://assets.mixkit.co/music/preview/mixkit-romantic-piano-224.mp3" loop></audio>

<!-- PAGE 1 -->
<div class="page" id="page1">
  <div class="typewriter" id="text"></div>
  <button class="btn" onclick="openChocolate()">Unwrap Your Chocolate ğŸ«</button>
</div>

<!-- PAGE 2 -->
<div class="page hidden" id="page2">
  <div class="card">
    <h2>Chocolate Shower ğŸ«âœ¨</h2>
    <p style="margin-top:16px">
      Chocolates fallingâ€¦<br>
      just like my guard when Iâ€™m with you ğŸ˜Œ
    </p>
    <p style="margin-top:18px;opacity:.9">
      ğŸ‘‰ Tap anywhere to continue
    </p>
  </div>
</div>

<!-- INSTRUCTIONS -->
<div class="page hidden" id="instructions">
  <div class="card">
    <h2>ğŸ« Catch Game</h2>
    <p style="margin-top:16px">
      Move the basket with your finger<br><br>
      Catch <b>5 chocolates</b><br><br>
      ğŸ’ A secret waits for you
    </p>
    <button class="btn" onclick="startGamePage()">Start Game ğŸ®</button>
  </div>
</div>

<!-- GAME -->
<div class="page hidden" id="page3">
  <div id="counter">Chocolates: 0</div>
  <div id="basket">ğŸ§º</div>
</div>

<!-- SCORE -->
<div class="page hidden" id="scoreCard">
  <div class="card">
    <h1>ğŸ‰ You Did It</h1>
    <p id="finalScore" style="margin-top:14px"></p>
    <button class="btn" onclick="showFinal()">Your Surprise ğŸ’–</button>
  </div>
</div>

<!-- FINAL -->
<div class="page hidden" id="page4">
  <div class="heart">â¤ï¸</div>
  <h1 id="nameLine"></h1>
  <p style="margin-top:16px">
    I may joke, tease, and pretend Iâ€™m tough ğŸ˜Œ<br>
    but loving you is the softest truth in my life.
  </p>
  <p style="margin-top:18px;font-size:22px;font-weight:600">
    Forever yours, in every lifetime ğŸ’
  </p>
  <div class="envelope" onclick="openLetter()">ğŸ’Œ</div>
  <div class="letter" id="letter">
    With you, even ordinary days feel sweet.<br>
    Every smile, every fight, every silence â€”<br>
    I choose you â¤ï¸
  </div>
</div>

<script>
/* ---------- TYPEWRITER ---------- */
const intro="Hey Moulima ğŸ˜â€¦ I wrapped a little piece of my heart in chocolate, just for you ğŸ’";
let ti=0;
(function type(){
  if(ti<intro.length){
    text.innerHTML+=intro[ti++];
    setTimeout(type,70);
  }
})();

/* ---------- BACKGROUND CONTINUOUS RAIN ---------- */
setInterval(()=>{
  const c=document.createElement('div');
  c.className='bg-choco';
  c.innerText='ğŸ«';
  c.style.left=Math.random()*100+'vw';
  c.style.animationDuration=5+Math.random()*3+'s';
  document.body.appendChild(c);
  setTimeout(()=>c.remove(),8000);
},500);

/* ---------- FLOW ---------- */
function openChocolate(){
  unwrap.play();
  page1.classList.add('hidden');
  page2.classList.remove('hidden');
}

page2.onclick=()=>{
  page2.classList.add('hidden');
  instructions.classList.remove('hidden');
};

/* ---------- GAME ---------- */
let score=0, dropTimer;
const basket=document.getElementById('basket');

document.addEventListener('touchmove',e=>{
  e.preventDefault();
  basket.style.left=e.touches[0].clientX+'px';
},{passive:false});

function startGamePage(){
  instructions.classList.add('hidden');
  page3.classList.remove('hidden');
  startGame();
}

function startGame(){
  score=0;
  counter.innerText="Chocolates: 0";

  dropTimer=setInterval(()=>{
    const c=document.createElement('div');
    c.className='bg-choco';
    c.innerText='ğŸ«';
    c.style.left=Math.random()*90+'vw';
    c.style.animationDuration='3s';
    page3.appendChild(c);

    const hit=setInterval(()=>{
      const cr=c.getBoundingClientRect();
      const br=basket.getBoundingClientRect();
      if(cr.bottom>br.top && cr.left<br.right && cr.right>br.left){
        bite.play();
        score++;
        counter.innerText="Chocolates: "+score;
        c.remove();
        clearInterval(hit);
        if(score===5) endGame();
      }
    },40);

    setTimeout(()=>{c.remove();clearInterval(hit)},3000);
  },800);
}

function endGame(){
  clearInterval(dropTimer);
  success.play();
  page3.classList.add('hidden');
  finalScore.innerText="Every chocolate, just like my heart â€” caught by you ğŸ«â¤ï¸";
  scoreCard.classList.remove('hidden');
  fireworks();
}

/* ---------- FIREWORKS ---------- */
function fireworks(){
  for(let i=0;i<28;i++){
    const f=document.createElement('div');
    f.className='firework';
    f.style.left='50%';
    f.style.top='40%';
    f.style.background='hsl('+Math.random()*360+',100%,75%)';
    f.style.setProperty('--x',(Math.random()*300-150)+'px');
    f.style.setProperty('--y',(Math.random()*300-150)+'px');
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1000);
  }
}

function showFinal(){
  scoreCard.classList.add('hidden');
  page4.classList.remove('hidden');
  bgm.play();
  typeName();
}

/* ---------- NAME TYPE ---------- */
const nameText="Happy Chocolate Day, Moulima ğŸ«";
let ni=0;
function typeName(){
  if(ni<nameText.length){
    nameLine.innerHTML+=nameText[ni++];
    setTimeout(typeName,80);
  }
}

function openLetter(){
  letter.style.display='block';
}
</script>

</body>
</html>
