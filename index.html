<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>For Moulima üíç</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

<style>
/* ================= GLOBAL ================= */
* { margin:0; padding:0; box-sizing:border-box; font-family:'Playfair Display', serif; }
body { height:100vh; color:#fff; overflow:hidden; position:relative; }

/* ================= BACKGROUND LAYER ================= */
.bg-layer {
  position:absolute;
  inset:0;
  background: radial-gradient(circle at top,#00164B,#000B2B);
  filter: blur(6px);
  transition: background 2s ease, filter 2s ease;
  z-index:0;
}

/* ================= STARS ================= */
.star { 
  position:absolute; 
  background:white; 
  border-radius:50%; 
  opacity:0; /* hidden initially */ 
  animation:twinkle linear infinite; 
  pointer-events:none;
  z-index:0;
}
@keyframes twinkle {
  0%,100% { opacity:0.2; transform: rotate(0deg) scale(1); }
  50% { opacity:1; transform: rotate(45deg) scale(1.2); }
}

/* ================= PAGE STRUCTURE ================= */
.page1, .page2, .page3 { position:absolute; inset:0; transition: opacity 1s ease; opacity:0; pointer-events:none; z-index:1; }
.page1.show, .page2.show, .page3.show { opacity:1; pointer-events:auto; }

/* ================= PAGE 1 ================= */
.page1 { display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; height:100vh; width:100vw; }
.typing { font-size:1.2rem; line-height:1.8; max-width:320px; min-height:120px; }
.heart { margin-top:40px; width:90px; height:90px; background:#ff4d6d; position:relative; transform:rotate(-45deg); display:none; box-shadow:0 0 25px rgba(255,77,109,0.7); }
.heart::before,.heart::after { content:""; width:90px; height:90px; background:#ff4d6d; border-radius:50%; position:absolute; }
.heart::before{ top:-45px; left:0; } .heart::after{ left:45px; top:0; }
.pulse { animation:pulse 1.2s infinite; }
@keyframes pulse { 0%{transform:scale(1) rotate(-45deg);}50%{transform:scale(1.12) rotate(-45deg);}100%{transform:scale(1) rotate(-45deg);} }
.hint { margin-top:16px; font-size:0.9rem; opacity:0.7; display:none; cursor:pointer; }

/* ================= PAGE 2 ================= */
.page2 { display:flex; justify-content:center; align-items:center; height:100vh; width:100vw; }
.question-box { background:#fff; color:#2b2b2b; padding:32px 24px; border-radius:16px; width:320px; text-align:center; animation:pop 1s ease; }
@keyframes pop{from{transform:scale(.7);opacity:0;}to{transform:scale(1);opacity:1;}}
.q-buttons { margin-top:20px; display:flex; gap:14px; justify-content:center; }
.q-buttons button { padding:12px 18px; border-radius:30px; border:none; font-size:1rem; cursor:pointer; }
.yes { background:#ff4d6d; color:#fff; }
.no { background:#ddd; }

/* ================= PAGE 3 ================= */
.page3 { background:transparent; position:relative; width:100vw; height:100vh; overflow:hidden; }
.envelope {
  background:#fff;
  padding:28px 24px;
  border-radius:16px;
  width:340px;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,.3);
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:2;
}
.letter-text { font-size:1.05rem; line-height:1.9; color:#333; }
.flowers { font-size:1.5rem; margin-bottom:12px; }

/* ================= SWIRLING HEARTS/PETALS ================= */
.falling { 
  position:absolute; 
  top:-30px; 
  z-index:1; /* behind letter */
  pointer-events:none; 
  animation-fill-mode:forwards;
}

@keyframes swirl {
  0% { transform: translateX(0) translateY(0) rotate(0deg); opacity:1; }
  25% { transform: translateX(15px) translateY(25%) rotate(20deg); }
  50% { transform: translateX(-10px) translateY(50%) rotate(-10deg); }
  75% { transform: translateX(10px) translateY(75%) rotate(15deg); }
  100% { transform: translateX(0) translateY(120vh) rotate(0deg); opacity:0; }
}

/* ================= HEART BURST ================= */
.burst { position:fixed; font-size:24px; z-index:999; animation:burst 1.2s ease forwards; }
@keyframes burst { to { transform: translate(var(--x), var(--y)) scale(.2); opacity:0; } }
</style>
</head>

<body>

<!-- ================= BACKGROUND LAYER ================= -->
<div class="bg-layer" id="bgLayer"></div>

<!-- ================= PAGE 1 ================= -->
<div class="page1 show" id="page1">
  <div class="typing" id="typing"></div>
  <div class="heart pulse" id="heart"></div>
  <div class="hint" id="hint">Hold this heart for a moment‚Ä¶</div>
</div>

<!-- ================= PAGE 2 ================= -->
<div class="page2" id="page2">
  <div class="question-box">
    üåπüå∫üå∏
    <h2>Will you be mine,<br>today and always? üíç</h2>
    <div class="q-buttons">
      <button class="yes" id="yesBtn">Yes ‚ù§Ô∏è</button>
      <button class="no" id="noBtn">Let me think üôà</button>
    </div>
  </div>
</div>

<!-- ================= PAGE 3 ================= -->
<div class="page3" id="page3">
  <div class="envelope">
    <div class="flowers">üå∫üåπüå∏</div>
    <div class="letter-text">
      You didn‚Äôt just say yes‚Ä¶<br><br>
      You chose my heart,<br>
      my days,<br>
      and every tomorrow I dream of.<br><br>
      With you, love feels calm.<br>
      With you, life feels warm.<br><br>
      <strong>This is only the beginning‚Ä¶ ‚ù§Ô∏è</strong>
    </div>
  </div>
</div>

<audio id="typingSound" src="https://www.soundjay.com/mechanical/sounds/keyboard-1.mp3" preload="auto"></audio>

<script>
/* ================= STARS ================= */
const stars=[];
for(let i=0;i<60;i++){
  let star=document.createElement("div");
  star.className="star";
  let size=Math.random()*2+1; 
  star.style.width=size+"px";
  star.style.height=size+"px";
  star.style.top=Math.random()*100+"vh";
  star.style.left=Math.random()*100+"vw";
  let speed=Math.random()*5+3; 
  star.style.animationDuration=speed+"s";
  document.body.appendChild(star);
  stars.push(star);
}

/* ================= PAGE 1 TYPING WITH SOUND ================= */
const textLines=["I‚Äôve been meaning to ask you something‚Ä¶","Not yesterday.","Not tomorrow.","But right now."];
let line=0,char=0;
const typing=document.getElementById("typing");
const typingSound=document.getElementById("typingSound");

function typeText(){
  if(line<textLines.length){
    if(char<textLines[line].length){
      typing.innerHTML+=textLines[line][char++];
      typingSound.currentTime=0;
      typingSound.play();
      setTimeout(typeText,50);
    }else{
      typing.innerHTML+="<br><br>";
      line++; char=0;
      setTimeout(typeText,600);
    }
  }else{
    heart.style.display="block";
    hint.style.display="block";
  }
}
typeText();

/* ================= PAGE 1 HEART HOLD ================= */
const heart=document.getElementById("heart");
const hint=document.getElementById("hint");
const page1=document.getElementById("page1");
const page2=document.getElementById("page2");
const page3=document.getElementById("page3");
const bgLayer=document.getElementById("bgLayer");

let holdTimer;
heart.addEventListener("touchstart",()=>{
  holdTimer=setTimeout(()=>{ 
    page1.classList.remove("show");
    page2.classList.add("show");
  },1200);
});
heart.addEventListener("touchend",()=>clearTimeout(holdTimer));
hint.addEventListener("click",()=>{
  page1.classList.remove("show");
  page2.classList.add("show");
});

/* ================= PAGE 2 LOGIC ================= */
const noBtn=document.getElementById("noBtn");
const yesBtn=document.getElementById("yesBtn");

noBtn.addEventListener("mouseover",()=>{
  noBtn.style.transform=`translate(${Math.random()*60-30}px,${Math.random()*40-20}px)`;
});

yesBtn.addEventListener("click",()=>{
  page2.classList.remove("show");
  page3.classList.add("show");
  
  // Background transition: blue blurred -> red clear
  bgLayer.style.background='radial-gradient(circle at top,#4B0000,#2B0000)';
  bgLayer.style.filter='blur(0px)';
  
  // Show stars
  stars.forEach(s=>s.style.opacity=0.5);
  
  heartRain();
  burst();
});

/* ================= PAGE 3 EFFECTS ================= */
function heartRain(){
  setInterval(()=>{
    const h=document.createElement("div");
    h.className="falling";
    h.innerHTML=Math.random()>0.5?"‚ù§Ô∏è":"üå∏";
    const size=Math.floor(Math.random()*16)+16;
    h.style.fontSize=size+"px";
    h.style.left=Math.random()*100+"%"; 
    const speed=4+Math.random()*4;
    h.style.animation = `swirl ${speed}s linear forwards`;
    page3.appendChild(h);
    setTimeout(()=>h.remove(), speed*1000);
  },300);
}

function burst(){
  for(let i=0;i<18;i++){
    const b=document.createElement("div");
    b.className="burst";
    b.innerHTML="‚ù§Ô∏è";
    b.style.left="50vw";
    b.style.top="50vh";
    b.style.setProperty("--x",(Math.random()*300-150)+"px");
    b.style.setProperty("--y",(Math.random()*300-150)+"px");
    document.body.appendChild(b);
    setTimeout(()=>b.remove(),1200);
  }
}
</script>

</body>
</html>
